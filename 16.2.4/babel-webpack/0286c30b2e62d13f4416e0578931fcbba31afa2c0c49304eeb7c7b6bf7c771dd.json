{"ast":null,"code":"import { PokemonDetail } from '../service/models/pokemon.detail';\nimport { forkJoin, map, switchMap } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../service/PokemonService\";\nimport * as i2 from \"@angular/common\";\nimport * as i3 from \"../pokemon-card/pokemon-card.component\";\nfunction PokemonListComponent_app_pokemon_card_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-pokemon-card\", 3);\n  }\n  if (rf & 2) {\n    const pokemon_r1 = ctx.$implicit;\n    i0.ɵɵproperty(\"pokemon\", pokemon_r1);\n  }\n}\nexport let PokemonListComponent = /*#__PURE__*/(() => {\n  class PokemonListComponent {\n    constructor(pokemonService) {\n      this.pokemonService = pokemonService;\n      this.pokemons = [];\n      this.classicMode = true;\n      this.offset = 0;\n      this.isLastPage = false;\n      this.searchPokemon = new PokemonDetail();\n      this.isSearching = false;\n      this.getAllPokemons(this.offset);\n    }\n    getAllPokemons(offSet) {\n      this.pokemonService.getPokemonList(offSet).subscribe(list => {\n        if (list.length === 0) {\n          this.isLastPage = true;\n          this.getPokemon(list);\n        }\n        if (!this.isLastPage) {\n          this.getPokemon(list);\n        }\n      });\n    }\n    getPokemon(list) {\n      const arr = [];\n      list.map(value => {\n        arr.push(this.pokemonService.getPokemonDetail(value.name).pipe(switchMap(pokemon => {\n          //chamada para obter as informações de espécie do Pokémon.\n          return this.pokemonService.getPokemonSpecies(value.name).pipe(map(speciesData => {\n            //descrição em inglês no objeto de espécie.\n            const englishDescription = speciesData.flavor_text_entries.find(entry => entry.language.name === 'en');\n            pokemon.description = englishDescription?.flavor_text;\n            return pokemon;\n          }));\n        })));\n      });\n      forkJoin([...arr]).subscribe(pokemons => {\n        this.pokemons.push(...pokemons);\n      });\n    }\n    nextPage() {\n      this.offset += 60;\n      this.getAllPokemons(this.offset);\n      console.log(this.pokemons);\n    }\n    static #_ = this.ɵfac = function PokemonListComponent_Factory(t) {\n      return new (t || PokemonListComponent)(i0.ɵɵdirectiveInject(i1.PokemonService));\n    };\n    static #_2 = this.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n      type: PokemonListComponent,\n      selectors: [[\"app-pokemon-list\"]],\n      decls: 4,\n      vars: 1,\n      consts: [[1, \"card-conteiner\"], [\"class\", \"card\", 3, \"pokemon\", 4, \"ngFor\", \"ngForOf\"], [1, \"buttonShowMore\", 3, \"click\"], [1, \"card\", 3, \"pokemon\"]],\n      template: function PokemonListComponent_Template(rf, ctx) {\n        if (rf & 1) {\n          i0.ɵɵelementStart(0, \"div\", 0);\n          i0.ɵɵtemplate(1, PokemonListComponent_app_pokemon_card_1_Template, 1, 1, \"app-pokemon-card\", 1);\n          i0.ɵɵelementEnd();\n          i0.ɵɵelementStart(2, \"button\", 2);\n          i0.ɵɵlistener(\"click\", function PokemonListComponent_Template_button_click_2_listener() {\n            return ctx.nextPage();\n          });\n          i0.ɵɵtext(3, \"Ver Mais\");\n          i0.ɵɵelementEnd();\n        }\n        if (rf & 2) {\n          i0.ɵɵadvance(1);\n          i0.ɵɵproperty(\"ngForOf\", ctx.pokemons);\n        }\n      },\n      dependencies: [i2.NgForOf, i3.PokemonCardComponent],\n      styles: [\".card-conteiner[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:10px;justify-content:center}.card[_ngcontent-%COMP%]{border-radius:15px;height:160px;width:130px}.buttonShowMore[_ngcontent-%COMP%]{border-radius:15px;background-image:radial-gradient(circle at -16.07% 44.22%,#b0c171 0,#a4c477 3.33%,#98c67d 6.67%,#8cc885 10%,#7fca8e 13.33%,#71cb97 16.67%,#63cda1 20%,#53cdac 23.33%,#42ceb7 26.67%,#2dcec1 30%,#0fcecc 33.33%,#00ced6 36.67%,#00cde0 40%,#00cce9 43.33%,#00cbf1 46.67%,#10c9f8 50%,#32c7fe 53.33%,#4bc5ff 56.67%,#60c2ff 60%,#74bfff 63.33%,#87bbff 66.67%,#99b8ff 70%);color:#fff;height:40px;width:130px;border:none;font-size:16px;margin:2%;box-shadow:1px 1px 1px 1px #0003}.buttonShowMore[_ngcontent-%COMP%]:active{transform:scale(.98);box-shadow:3px 2px 22px 1px #0000003d}\"]\n    });\n  }\n  return PokemonListComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}